{% extends "base.html" %}
{% load static %}

{% block content %}

<!-- Dashboard Tabs -->
<ul class="nav nav-tabs" id="dashboardTabs" role="tablist">
    <li class="nav-item" role="presentation">
        <button class="nav-link active" id="graphs-tab" data-bs-toggle="tab" data-bs-target="#graphs" type="button" role="tab">
            📊 Graphs
        </button>
    </li>
    <li class="nav-item" role="presentation">
        <button class="nav-link" id="farm-tab" data-bs-toggle="tab" data-bs-target="#farm" type="button" role="tab">
            🧑‍🌾 Farmers & Production
        </button>
    </li>
    <li class="nav-item" role="presentation">
        <button class="nav-link" id="finance-tab" data-bs-toggle="tab" data-bs-target="#finance" type="button" role="tab">
            💵 Finance
        </button>
    </li>
    <li class="nav-item" role="presentation">
        <button class="nav-link" id="ration-tab" data-bs-toggle="tab" data-bs-target="#ration" type="button" role="tab">
            🍽️ Rations
        </button>
    </li>
    <li class="nav-item" role="presentation">
        <button class="nav-link" id="admin-tab" data-bs-toggle="tab" data-bs-target="#admin" type="button" role="tab">
            ⚙️ Admin
        </button>
    </li>
</ul>

<div class="tab-content mt-3">

    <!-- Graphs Tab -->
    <div class="tab-pane fade show active" id="graphs" role="tabpanel">
        <div id="graphsContainer" class="chart-cards">

            <!-- Card 1 -->
            <div class="card shadow p-3 rounded-3 mb-4 graph-card">
                <h5>📊 Farmer & Production Analytics</h5>
                <div class="row g-4">
                    <div class="col-md-6">
                        <div class="chart-wrapper">
                            <canvas id="farmerChart"></canvas>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="chart-wrapper">
                            <canvas id="productionChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Card 2 -->
            <div class="card shadow p-3 rounded-3 mb-4 graph-card">
                <h5>💵 Payments & Inputs</h5>
                <div class="row g-4">
                    <div class="col-md-6">
                        <div class="chart-wrapper">
                            <canvas id="paymentsChart"></canvas>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="chart-wrapper">
                            <canvas id="inputDistributionChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Card 3 -->
            <div class="card shadow p-3 rounded-3 mb-4 graph-card">
                <h5>🍽️ Ration Formulation</h5>
                <div class="row g-4">
                    <div class="col-md-6">
                        <div class="chart-wrapper">
                            <canvas id="rationChart"></canvas>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <p class="text-muted">Other analytics can go here...</p>
                    </div>
                </div>
            </div>

        </div>

        <!-- Pagination -->
        <nav>
            <ul class="pagination justify-content-center mt-3" id="graphPagination"></ul>
        </nav>
    </div>

    <!-- Farmers & Production Tab -->
    <div class="tab-pane fade" id="farm" role="tabpanel">
        <div class="d-flex flex-wrap gap-3">
            <div class="card shadow-sm text-center p-3 hover-scale" style="width:200px;">
                <h5>👨‍🌾 Farmers</h5>
                <h2 class="text-success">{{ farmer_count }}</h2>
                <a href="{% url 'farmer_list' %}" class="btn btn-outline-success btn-sm">View</a>
            </div>
            <div class="card shadow-sm text-center p-3 hover-scale" style="width:200px;">
                <h5>🌱 Inputs</h5>
                <h2 class="text-primary">{{ input_count }}</h2>
                <a href="{% url 'farminput_list' %}" class="btn btn-outline-primary btn-sm">View</a>
            </div>
            <div class="card shadow-sm text-center p-3 hover-scale" style="width:200px;">
                <h5>🚚 Distributions</h5>
                <h2 class="text-warning">{{ distribution_count }}</h2>
                <a href="#" class="btn btn-outline-warning btn-sm">View</a>
            </div>
            <div class="card shadow-sm text-center p-3 hover-scale" style="width:200px;">
                <h5>🍽️ Ration</h5>
                <h2 class="text-info">⚙️</h2>
                <a href="#" class="btn btn-outline-info btn-sm">Formulate</a>
            </div>
        </div>
    </div>

    <!-- Finance Tab -->
    <div class="tab-pane fade" id="finance" role="tabpanel">
        <div class="d-flex flex-wrap gap-3">
            <div class="card shadow-sm text-center p-3 hover-scale" style="width:200px;">
                <h5>💵 Payments</h5>
                <h2 class="text-danger">{{ payment_count }}</h2>
                <a href="#" class="btn btn-outline-danger btn-sm">View</a>
            </div>
            <div class="card shadow-sm text-center p-3 hover-scale" style="width:200px;">
                <h5>📦 Inventory</h5>
                <h2 class="text-secondary">—</h2>
                <a href="#" class="btn btn-outline-secondary btn-sm">Manage</a>
            </div>
        </div>
    </div>

    <!-- Ration Formulation Tab -->
    <div class="tab-pane fade" id="ration" role="tabpanel">
        <div class="card shadow-sm p-3 w-100">
            <h5>🍽️ Ration Formulation</h5>
            <p class="text-muted">Formulate and manage rations for different farm animals</p>
            <div class="d-flex flex-wrap gap-3">
                <!-- Cattle -->
                <div class="card shadow-sm text-center p-3 hover-scale" style="width:200px;">
                    <h5>🐄 Cattle</h5>
                    <h2 class="text-info">⚙️</h2>
                    <a href="#" class="btn btn-outline-info btn-sm mb-1">Formulate</a>
                    <a href="#" class="btn btn-outline-secondary btn-sm">View Saved</a>
                </div>
                <!-- Pigs -->
                <div class="card shadow-sm text-center p-3 hover-scale" style="width:200px;">
                    <h5>🐖 Pigs</h5>
                    <h2 class="text-info">⚙️</h2>
                    <a href="#" class="btn btn-outline-info btn-sm mb-1">Formulate</a>
                    <a href="#" class="btn btn-outline-secondary btn-sm">View Saved</a>
                </div>
                <!-- Poultry -->
                <div class="card shadow-sm text-center p-3 hover-scale" style="width:200px;">
                    <h5>🐓 Poultry</h5>
                    <h2 class="text-info">⚙️</h2>
                    <a href="{% url 'poultry_type_selection' %}" class="btn btn-outline-info btn-sm mb-1">Formulate</a>
                    <a href="#" class="btn btn-outline-secondary btn-sm">View Saved</a>
                </div>
                <!-- Sheep & Goats -->
                <div class="card shadow-sm text-center p-3 hover-scale" style="width:200px;">
                    <h5>🐑 Sheep/Goats</h5>
                    <h2 class="text-info">⚙️</h2>
                    <a href="#" class="btn btn-outline-info btn-sm mb-1">Formulate</a>
                    <a href="#" class="btn btn-outline-secondary btn-sm">View Saved</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Tab -->
    <div class="tab-pane fade" id="admin" role="tabpanel">
        <div class="d-flex flex-wrap gap-3">
            <div class="card shadow-sm text-center p-3 hover-scale" style="width:200px;">
                <h5>📅 Seasons</h5>
                <h2 class="text-primary">{{ season_count|default:"—" }}</h2>
                <a href="{% url 'season_list' %}" class="btn btn-outline-primary btn-sm">Manage</a>
            </div>
            <div class="card shadow-sm text-center p-3 hover-scale" style="width:200px;">
                <h5>👥 Staff</h5>
                <h2 class="text-dark">{{ staff_count|default:"—" }}</h2>
                <a href="#" class="btn btn-outline-dark btn-sm">Manage</a>
            </div>
            <div class="card shadow-sm text-center p-3 hover-scale" style="width:200px;">
                <h5>🧑‍🌾 Farmers</h5>
                <h2 class="text-success">{{ farmer_count|default:"—" }}</h2>
                <a href="{% url 'farmer_list' %}" class="btn btn-outline-success btn-sm">Manage</a>
            </div>
            <div class="card shadow-sm text-center p-3 hover-scale" style="width:200px;">
                <h5>🌱 Inputs</h5>
                <h2 class="text-info">{{ input_count|default:"—" }}</h2>
                <a href="{% url 'farminput_list' %}" class="btn btn-outline-info btn-sm">Manage</a>
            </div>
            <div class="card shadow-sm text-center p-3 hover-scale" style="width:200px;">
                <h5>💵 Loans</h5>
                <h2 class="text-warning">{{ loan_count|default:"—" }}</h2>
                <a href="#" class="btn btn-outline-warning btn-sm">Manage</a>
            </div>
            <div class="card shadow-sm text-center p-3 hover-scale" style="width:200px;">
                <h5>🍃 Produce</h5>
                <h2 class="text-success">{{ produce_count|default:"—" }}</h2>
                <a href="{% url 'produce_list' %}" class="btn btn-outline-success btn-sm">Manage</a>
            </div>
            <div class="card shadow-sm text-center p-3 hover-scale" style="width:200px;">
                <h5>📊 Reports</h5>
                <h2 class="text-info">📈</h2>
                <a href="#" class="btn btn-outline-info btn-sm">View</a>
            </div>
            <div class="card shadow-sm text-center p-3 hover-scale" style="width:200px;">
                <h5>⚙️ Settings</h5>
                <h2 class="text-secondary">🔧</h2>
                <a href="#" class="btn btn-outline-secondary btn-sm">Configure</a>
            </div>
        </div>
    </div>

</div>

<style>
    /* Hover effect to scale cards */
    .hover-scale:hover {
        transform: scale(1.05);
        transition: transform 0.3s ease-in-out;
        box-shadow: 0 8px 16px rgba(0,0,0,0.2);
    }

    .card h1 {
        font-size: 3rem;
    }

    @media (max-width: 576px) {
        .card {
            width: 100% !important;
            margin-bottom: 1rem;
        }
    }
</style>
{% endblock %}
