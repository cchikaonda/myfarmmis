{% extends "base.html" %}
{% load static humanize %}
{% block content %}
<div class="card shadow p-4 mt-4">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h2 class="mb-0">Farm Inputs</h2>
        <a href="{% url 'farminput_create' %}" class="btn btn-primary">➕ Add Farm Input</a>
    </div>

    <table class="table table-striped datatable" data-title="Farm Inputs">
        <thead>
            <tr>
                <th>Name</th>
                <th>Category</th>
                <th>Unit</th>
                <th class="text-end">Price</th>
                <th class="text-end">Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for input in inputs %}
            <tr>
                <td>{{ input.name }}</td>
                <td>{{ input.category }}</td>
                <td>{{ input.unit }}</td>
                <td class="text-end">MK {{ input.market_cost|floatformat:2|intcomma }}</td>
                <td class="text-end">
                    <a href="{% url 'farminput_update' input.pk %}" class="btn btn-sm btn-warning">✏️ Edit</a>
                    <!-- Delete button triggers modal -->
                    <button class="btn btn-sm btn-danger"
                        data-bs-toggle="modal"
                        data-bs-target="#deleteModal"
                        data-id="{{ input.pk }}"
                        data-item-name="{{ input.name }}"
                        data-delete-url="{% url 'farminput_delete' input.pk %}">
                        🗑️ Delete
                    </button>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
